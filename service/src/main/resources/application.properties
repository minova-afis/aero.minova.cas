spring.application.name=Core Application System
spring.profiles.default=development
aero.afis.host.url.http=http://mintest.minova.com

# Hub Funktionalität
#minova.hub.host=hub.minova.com:32777
# Unter welchem Namen CAS auftauchen sollte.
#minova.hub.client.name=CAS-TEST

#### NextGen settings #####
# Prefer Database Files and XBS over integrated files
#ng.api.preferdbfiles=true
#ng.api.dbfiles=true
#ng.api.dbregistry=true
#cors.allowed.origins=https://ng-dev.minova.com,https://ng.minova.com,http://localhost
###########################

# Plugins aus dem lib Ordner laden.
loader.path=../lib/

# Logge ausgeführten SQL Code.
logging.level.org.hibernate.SQL=DEBUG
logging.level.org.hibernate.type.descriptor.sql.BasicBinder=TRACE

spring.thymeleaf.check-template=true
spring.thymeleaf.check-template-location=true
spring.thymeleaf.content-type=text/html
spring.thymeleaf.enabled=true
spring.thymeleaf.encoding=UTF-8
spring.thymeleaf.mode=HTML
spring.thymeleaf.prefix=classpath:/templates/
spring.thymeleaf.suffix=.html

spring.http.converters.preferred-json-mapper=gson

#### Authentication Method ####
# Auto-setup no longer requires login_dataSource=admin - it creates its own temporary security context
# Configure authentication based on your deployment:
# - ldap: Use LDAP/Active Directory authentication
# - database: Use xtcasUsers table authentication
# - admin: In-memory admin user (for testing only - DO NOT use in production)
login_dataSource=ldap

server.servlet.context-path=/cas
server.port=8084

management.server.port=8081
management.endpoints.enabled-by-default=false

spring.jpa.hibernate.ddl-auto=none

# Wichtig für Postgres, damit keine "_" erzeugt werden
spring.jpa.hibernate.naming.physical-strategy=org.hibernate.boot.model.naming.PhysicalNamingStrategyStandardImpl

#### HikariCP Connection Pool Settings ####

# SEE DISCUSSION ON THIS VALUES IN doc/md/Hikari.md

# maximumPoolSize (default: 10) - Maximum number of connections in pool
# Implication: Higher = more concurrent requests but more DB resources/ports consumed
# NOT SET - using default (10) to avoid port exhaustion (see TTA issue #2052)
# If pool exhaustion occurs frequently, increase cautiously (e.g., 15-20)
spring.datasource.hikari.maximumPoolSize=15

# minimumIdle (default: same as maximumPoolSize) - Minimum idle connections HikariCP maintains
# Implication: Lower = fewer idle connections, faster pool shrinking; Higher = faster response for bursts
# NOT SET - using default (equals maximumPoolSize) for consistent pool size
#spring.datasource.hikari.minimumIdle=10

# connectionTimeout (default: 30000ms = 30s) - Max time to wait for connection from pool
# Implication: If all connections busy, request waits this long before throwing SQLException
# NOT SET - using default (30s) which is reasonable for most cases
#spring.datasource.hikari.connectionTimeout=30000

# keepaliveTime (default: 0 = disabled) - How often to test idle connections (must be < maxLifetime)
# Implication: Prevents DB from closing idle connections; detects broken connections early
# SET TO 30s - keeps connections alive, prevents "connection reset" errors
spring.datasource.hikari.keepaliveTime=30000

# leakDetectionThreshold (default: 0 = disabled) - Logs warning if connection held longer than this
# Implication: Helps detect connection leaks (unclosed connections in code)
# SET TO 5min - TOO SHORT for procedures up to 15min! Increase to 20min (1200000ms) for daily closing
spring.datasource.hikari.leakDetectionThreshold=1200000

# maxLifetime (default: 1800000ms = 30min) - Max lifetime of connection in pool
# Implication: Connections closed after this time to avoid stale connections and DB-side timeouts
# SET TO 10min - TOO SHORT for procedures up to 15min! Increase to 30min (1800000ms) or 1h (3600000ms)
spring.datasource.hikari.maxLifetime=1800000

# idleTimeout (default: 600000ms = 10min) - Max time connection can sit idle before being retired
# Implication: Only applies if minimumIdle < maximumPoolSize; reduces idle connections
# NOT SET - not relevant since minimumIdle = maximumPoolSize (pool doesn't shrink)
#spring.datasource.hikari.idleTimeout=600000

# validationTimeout (default: 5000ms = 5s) - Max time to wait for connection validation query
# Implication: If validation takes longer, connection considered invalid and discarded
# NOT SET - using default (5s) which is sufficient for most databases
#spring.datasource.hikari.validationTimeout=5000

# autoCommit (default: true) - Whether connections have auto-commit enabled
# Implication: We set to FALSE globally in code (systemDatabase.getConnection()) for explicit transaction control
# NOT SET - controlled programmatically, not via properties
#spring.datasource.hikari.autoCommit=true